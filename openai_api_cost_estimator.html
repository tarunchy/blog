<!DOCTYPE html>
<html>
<head>
	<title>OpenAI API Cost Estimator</title>
	<style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f7f7f7;
        }
    
        h1 {
            text-align: center;
            font-size: 2rem;
            color: #333;
            margin-bottom: 20px;
        }
    
        #app {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
            border-radius: 5px;
        }
    
        label {
            display: inline-block;
            font-size: 1rem;
            font-weight: bold;
            margin-right: 10px;
            color: #555;
        }
    
        textarea {
            display: block;
            width: 100%;
            padding: 10px;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 10px;
        }
    
        select {
            display: block;
            width: 100%;
            padding: 10px;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 20px;
        }
    
        button {
            display: inline-block;
            font-size: 1rem;
            font-weight: bold;
            padding: 10px 20px;
            color: #fff;
            background-color: #007bff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.2s;
        }
    
        button:hover {
            background-color: #0056b3;
        }
    
        #result {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
            margin-top: 20px;
        }

        .info-section {
            max-width: 800px;
            margin: 30px auto;
            padding: 30px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
            border-radius: 5px;
        }

        .info-section h2 {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 20px;
        }

        .info-section p {
            font-size: 1rem;
            color: #555;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .tips-toggle {
            display: inline-block;
            font-size: 1rem;
            font-weight: bold;
            padding: 10px 20px;
            color: #fff;
            background-color: #007bff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 10px;
            transition: background-color 0.2s;
        }

        .tips-toggle:hover {
            background-color: #0056b3;
        }

        .tips-section {
            display: none;
            margin-bottom: 20px;
        }

        .tips-section p {
            margin-bottom: 10px;
        }
    </style>
    
</head>
<body>
	<h1>OpenAI API Cost Estimator</h1>
    <div class="info-section">
        <h2>About Prompts and OpenAI API</h2>
        <p>Prompts are the input texts you provide to the OpenAI API. They act as a starting point for the AI model to generate a relevant response. The API uses tokens, which are chunks of text, to process the input and generate the output.</p>
        <p>OpenAI API works by interpreting the prompts you provide and generating appropriate responses based on the context, model, and other parameters you set. The cost of using the API depends on the number of tokens processed, which include both input and output tokens.</p>
    </div>

	<div id="app">
		<form id="api_form">
			<label for="prompt_input">Prompt:</label>
			<textarea id="prompt_input" name="prompt_input" rows="5"></textarea>

			<label for="response_size">Estimated Response Size:</label>
			<select id="response_size" name="response_size">
				<option value="1">1x</option>
				<option value="2">2x</option>
				<option value="3">3x</option>
				<option value="4">4x</option>
				<option value="5">5x</option>
				<option value="6">6x</option>
				<option value="8">8x</option>
				<option value="9">9x</option>
				<option value="10">10x</option>
				<option value="15">15x</option>
				<option value="20">20x</option>
			</select>

			<button type="submit">Estimate Cost</button>
		</form>

		<div id="result"></div>
	</div>

    <div class="info-section">
        <button class="tips-toggle" id="tips-toggle">Show Cost-saving Tips</button>
        <div class="tips-section" id="tips-section">
            <h2>Tips to Reduce API Cost</h2>
            <p>1. Use shorter prompts: Shorter prompts consume fewer tokens, reducing the API cost.</p>
            <p>2. Limit response length: Use the 'max tokens' parameter to limit the length of the API response, which can help control costs.</p>
            <p>3. Use lower-cost models: Choose a less expensive model that still meets your needs. Lower-cost models may provide less accurate responses but can save you money.</p>
            <p>4. Cache and reuse responses: If you make similar API calls frequently, consider caching and reusing responses to avoid making redundant API calls.</p>
        </div>
    </div>

	<script>

         // New JavaScript code for the collapsible tips section
         document.getElementById('tips-toggle').addEventListener('click', function() {
            var tipsSection = document.getElementById('tips-section');
            if (tipsSection.style.display === 'none') {
                tipsSection.style.display = 'block';
                this.innerHTML = 'Hide Cost-saving Tips';
            } else {
                tipsSection.style.display = 'none';
                this.innerHTML = 'Show Cost-saving Tips';
            }
        });

        
  document.addEventListener('DOMContentLoaded', function() {
    var form = document.getElementById("api_form");
    form.addEventListener("submit", function(event) {
      event.preventDefault();

      var prompt_input = document.getElementById("prompt_input").value;
      var response_size = parseInt(document.getElementById("response_size").value);

      // Calculate the token count
      var token_count = prompt_input.split(/\s+/).length * response_size;

      // Calculate the estimated cost
      var cost = 0;
      if (token_count <= 400000) {
        cost = token_count * 0.0004;
      } else if (token_count <= 600000) {
        cost = token_count * 0.0005;
      } else if (token_count <= 2000000) {
        cost = token_count * 0.002;
      } else if (token_count <= 20000000) {
        cost = token_count * 0.02;
      } else {
        cost = token_count * 0.10;
      }

      // Display the result to the user
      var result_elem = document.getElementById("result");
      result_elem.innerHTML = "Estimated cost: $" + cost.toFixed(2);
    });
  });
  </script>
</body>
</html>
